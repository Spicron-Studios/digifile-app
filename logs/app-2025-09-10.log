[2025-09-10 08:54:39.698] (INFO) - api/files/[uid]/db_write.ts - Creating new file
[2025-09-10 08:54:39.698] (DEBUG) - api/files/[uid]/db_write.ts - RECEIVED DATA OBJECT FOR NEW FILE: {
  "file_number": "F20255189",
  "account_number": "A752982",
  "patient": {
    "name": "",
    "gender": "",
    "id": "0008065092088",
    "dob": "2000/08/06"
  },
  "medical_cover": {
    "type": "medical-aid",
    "same_as_patient": false,
    "member": {
      "id": "",
      "name": "",
      "initials": "",
      "surname": "",
      "dob": "",
      "cell": "",
      "email": "",
      "address": ""
    },
    "medical_aid": {
      "scheme_id": "",
      "name": "",
      "membership_number": "",
      "dependent_code": ""
    }
  }
}
[2025-09-10 08:54:39.699] (INFO) - api/files/[uid]/db_write.ts - Generated new file UID: a3534a2d-bb6f-4649-a214-4a11e3fa2ef5
[2025-09-10 08:54:39.923] (ERROR) - api/files/[uid]/db_write.ts - Error creating new file: Failed query: insert into "file_info" ("uid", "file_number", "account_number", "billing_account_no", "referral_doc_name", "referral_doc_number", "consent1", "consent2", "consent3", "orgid", "active", "date_created", "last_edit", "locked") values ($1, $2, $3, default, $4, $5, default, default, default, $6, $7, $8, $9, default) returning "uid", "file_number", "account_number", "billing_account_no", "referral_doc_name", "referral_doc_number", "consent1", "consent2", "consent3", "orgid", "active", "date_created", "last_edit", "locked"
params: a3534a2d-bb6f-4649-a214-4a11e3fa2ef5,F20255189,A752982,,,d290f1ee-6c54-4b01-90e6-d701748f0851,true,Wed Sep 10 2025 10:54:39 GMT+0200 (South Africa Standard Time),Wed Sep 10 2025 10:54:39 GMT+0200 (South Africa Standard Time)
Logger initialized
[2025-09-10 11:42:47.369] (INFO) - api/files/[uid]/db_write.ts - Creating new file
[2025-09-10 11:42:47.369] (DEBUG) - api/files/[uid]/db_write.ts - RECEIVED DATA OBJECT FOR NEW FILE: {
  "file_number": "F20255189",
  "account_number": "A752982",
  "patient": {
    "name": "",
    "gender": "",
    "id": "0008065092088",
    "dob": "2000/08/06"
  },
  "medical_cover": {
    "type": "medical-aid",
    "same_as_patient": false,
    "member": {
      "id": "",
      "name": "",
      "initials": "",
      "surname": "",
      "dob": "",
      "cell": "",
      "email": "",
      "address": ""
    },
    "medical_aid": {
      "scheme_id": "",
      "name": "",
      "membership_number": "",
      "dependent_code": ""
    }
  }
}
[2025-09-10 11:42:47.370] (INFO) - api/files/[uid]/db_write.ts - Generated new file UID: c89fa319-5086-4883-9bc5-47a9f0b2fa91
[2025-09-10 11:42:49.972] (ERROR) - api/files/[uid]/db_write.ts - Error creating new file: Failed query: insert into "file_info" ("uid", "file_number", "account_number", "billing_account_no", "referral_doc_name", "referral_doc_number", "consent1", "consent2", "consent3", "orgid", "active", "date_created", "last_edit", "locked") values ($1, $2, $3, default, $4, $5, default, default, default, $6, $7, $8, $9, default) returning "uid", "file_number", "account_number", "billing_account_no", "referral_doc_name", "referral_doc_number", "consent1", "consent2", "consent3", "orgid", "active", "date_created", "last_edit", "locked"
params: c89fa319-5086-4883-9bc5-47a9f0b2fa91,F20255189,A752982,,,d290f1ee-6c54-4b01-90e6-d701748f0851,true,Wed Sep 10 2025 13:42:47 GMT+0200 (South Africa Standard Time),Wed Sep 10 2025 13:42:47 GMT+0200 (South Africa Standard Time)
Logger initialized
[2025-09-10 16:11:58.788] (INFO) - actions/files.ts - Fetching files for orgId=d290f1ee-6c54-4b01-90e6-d701748f0851
[2025-09-10 16:12:02.410] (INFO) - actions/files.ts - Returning 0 files
Logger initialized
[2025-09-10 16:12:26.888] (INFO) - api/files/[uid]/db_read.ts - Getting file data for UID: new
[2025-09-10 16:12:29.551] (DEBUG) - api/files/[uid]/db_read.ts - üè• API: Fetched 2 medical schemes
[2025-09-10 16:12:29.553] (DEBUG) - api/files/[uid]/db_read.ts - üìÑ API: New file template requested
[2025-09-10 16:12:39.770] (INFO) - api/files/[uid]/db_write.ts - Creating new file
[2025-09-10 16:12:39.770] (DEBUG) - api/files/[uid]/db_write.ts - RECEIVED DATA OBJECT FOR NEW FILE: {
  "file_number": "F20258075",
  "account_number": "A410720",
  "patient": {
    "name": "",
    "gender": "",
    "id": "970312898989",
    "dob": "1997/03/12"
  },
  "medical_cover": {
    "type": "medical-aid",
    "same_as_patient": false,
    "member": {
      "id": "",
      "name": "",
      "initials": "",
      "surname": "",
      "dob": "",
      "cell": "",
      "email": "",
      "address": ""
    },
    "medical_aid": {
      "scheme_id": "",
      "name": "",
      "membership_number": "",
      "dependent_code": ""
    }
  }
}
[2025-09-10 16:12:39.770] (INFO) - api/files/[uid]/db_write.ts - Generated new file UID: 9e8f4487-eb21-40f8-a750-f1d11cf9e285
[2025-09-10 16:12:40.234] (INFO) - api/files/[uid]/db_write.ts - New file_info created with UID: 9e8f4487-eb21-40f8-a750-f1d11cf9e285
[2025-09-10 16:12:40.235] (DEBUG) - api/files/[uid]/db_write.ts - Processing medical cover data for new file
[2025-09-10 16:12:40.236] (DEBUG) - api/files/[uid]/db_write.ts - Processing medical aid data
[2025-09-10 16:12:40.737] (WARNING) - api/files/[uid]/db_write.ts - No scheme ID provided, skipping medical aid save
[2025-09-10 16:12:40.740] (INFO) - api/files/[uid]/db_write.ts - New file created successfully
[2025-09-10 16:12:40.876] (INFO) - api/files/[uid]/db_read.ts - Getting file data for UID: 9e8f4487-eb21-40f8-a750-f1d11cf9e285
[2025-09-10 16:12:41.576] (DEBUG) - api/files/[uid]/db_read.ts - üè• API: Fetched 2 medical schemes
[2025-09-10 16:12:41.576] (INFO) - api/files/[uid]/db_read.ts - üè¢ API: Fetching file with UID: 9e8f4487-eb21-40f8-a750-f1d11cf9e285
[2025-09-10 16:12:43.437] (DEBUG) - api/files/[uid]/db_read.ts - üìù API: Fetched 0 file notes and 0 clinical notes
[2025-09-10 16:12:43.440] (ERROR) - api/files/[uid]/db_read.ts - üí• API: Error fetching file: isSameAsPatient is not defined
[2025-09-10 16:12:43.684] (INFO) - api/files/[uid]/db_read.ts - Getting file data for UID: 9e8f4487-eb21-40f8-a750-f1d11cf9e285
[2025-09-10 16:12:44.175] (DEBUG) - api/files/[uid]/db_read.ts - üè• API: Fetched 2 medical schemes
[2025-09-10 16:12:44.176] (INFO) - api/files/[uid]/db_read.ts - üè¢ API: Fetching file with UID: 9e8f4487-eb21-40f8-a750-f1d11cf9e285
[2025-09-10 16:12:46.046] (DEBUG) - api/files/[uid]/db_read.ts - üìù API: Fetched 0 file notes and 0 clinical notes
[2025-09-10 16:12:46.048] (ERROR) - api/files/[uid]/db_read.ts - üí• API: Error fetching file: isSameAsPatient is not defined
Logger initialized
[2025-09-10 16:20:04.545] (INFO) - api/files/[uid]/db_read.ts - Getting file data for UID: 9e8f4487-eb21-40f8-a750-f1d11cf9e285
[2025-09-10 16:20:07.293] (DEBUG) - api/files/[uid]/db_read.ts - üè• API: Fetched 2 medical schemes
[2025-09-10 16:20:07.297] (INFO) - api/files/[uid]/db_read.ts - üè¢ API: Fetching file with UID: 9e8f4487-eb21-40f8-a750-f1d11cf9e285
[2025-09-10 16:20:09.470] (DEBUG) - api/files/[uid]/db_read.ts - üìù API: Fetched 0 file notes and 0 clinical notes
[2025-09-10 16:20:09.471] (INFO) - api/files/[uid]/db_read.ts - ‚úÖ API: File data retrieved successfully
[2025-09-10 16:20:09.471] (DEBUG) - api/files/[uid]/db_read.ts - {
  "uid": "9e8f4487-eb21-40f8-a750-f1d11cf9e285",
  "file_number": "F20258075",
  "account_number": "A410720",
  "patient": {
    "id": "",
    "title": "",
    "name": "",
    "initials": "",
    "surname": "",
    "dob": "",
    "gender": "",
    "cell_phone": "",
    "additional_name": "",
    "additional_cell": "",
    "email": "",
    "address": ""
  },
  "medical_cover": {
    "type": "private",
    "same_as_patient": false,
    "member": {
      "id": "",
      "name": "",
      "initials": "",
      "surname": "",
      "dob": "",
      "cell": "",
      "email": "",
      "address": ""
    },
    "medical_aid": {
      "scheme_id": "",
      "name": "",
      "membership_number": "",
      "dependent_code": ""
    },
    "injury_on_duty": {
      "company_name": "",
      "contact_person": "",
      "contact_number": "",
      "contact_email": ""
    }
  },
  "notes": {
    "file_notes": [],
    "clinical_notes": []
  },
  "medical_schemes": [
    {
      "uid": "8f58a215-d564-49c0-95b2-40e0c9ecf815",
      "scheme_name": "Discovery"
    },
    {
      "uid": "3e5e55cf-4ef3-4a08-be9d-51316a63ad25",
      "scheme_name": "Momentum"
    }
  ]
}
[2025-09-10 16:20:20.248] (INFO) - actions/files.ts - Fetching files for orgId=d290f1ee-6c54-4b01-90e6-d701748f0851
[2025-09-10 16:20:20.714] (INFO) - actions/files.ts - Returning 1 files
[2025-09-10 16:20:20.762] (INFO) - actions/files.ts - Fetching files for orgId=d290f1ee-6c54-4b01-90e6-d701748f0851
[2025-09-10 16:20:21.249] (INFO) - actions/files.ts - Returning 1 files
[2025-09-10 16:20:23.473] (INFO) - api/files/[uid]/db_read.ts - Getting file data for UID: 9e8f4487-eb21-40f8-a750-f1d11cf9e285
[2025-09-10 16:20:23.947] (DEBUG) - api/files/[uid]/db_read.ts - üè• API: Fetched 2 medical schemes
[2025-09-10 16:20:23.948] (INFO) - api/files/[uid]/db_read.ts - üè¢ API: Fetching file with UID: 9e8f4487-eb21-40f8-a750-f1d11cf9e285
[2025-09-10 16:20:26.186] (DEBUG) - api/files/[uid]/db_read.ts - üìù API: Fetched 0 file notes and 0 clinical notes
[2025-09-10 16:20:26.187] (INFO) - api/files/[uid]/db_read.ts - ‚úÖ API: File data retrieved successfully
[2025-09-10 16:20:26.188] (DEBUG) - api/files/[uid]/db_read.ts - {
  "uid": "9e8f4487-eb21-40f8-a750-f1d11cf9e285",
  "file_number": "F20258075",
  "account_number": "A410720",
  "patient": {
    "id": "",
    "title": "",
    "name": "",
    "initials": "",
    "surname": "",
    "dob": "",
    "gender": "",
    "cell_phone": "",
    "additional_name": "",
    "additional_cell": "",
    "email": "",
    "address": ""
  },
  "medical_cover": {
    "type": "private",
    "same_as_patient": false,
    "member": {
      "id": "",
      "name": "",
      "initials": "",
      "surname": "",
      "dob": "",
      "cell": "",
      "email": "",
      "address": ""
    },
    "medical_aid": {
      "scheme_id": "",
      "name": "",
      "membership_number": "",
      "dependent_code": ""
    },
    "injury_on_duty": {
      "company_name": "",
      "contact_person": "",
      "contact_number": "",
      "contact_email": ""
    }
  },
  "notes": {
    "file_notes": [],
    "clinical_notes": []
  },
  "medical_schemes": [
    {
      "uid": "8f58a215-d564-49c0-95b2-40e0c9ecf815",
      "scheme_name": "Discovery"
    },
    {
      "uid": "3e5e55cf-4ef3-4a08-be9d-51316a63ad25",
      "scheme_name": "Momentum"
    }
  ]
}
[2025-09-10 16:20:26.238] (INFO) - api/files/[uid]/db_read.ts - Getting file data for UID: 9e8f4487-eb21-40f8-a750-f1d11cf9e285
[2025-09-10 16:20:26.725] (DEBUG) - api/files/[uid]/db_read.ts - üè• API: Fetched 2 medical schemes
[2025-09-10 16:20:26.726] (INFO) - api/files/[uid]/db_read.ts - üè¢ API: Fetching file with UID: 9e8f4487-eb21-40f8-a750-f1d11cf9e285
[2025-09-10 16:20:30.256] (DEBUG) - api/files/[uid]/db_read.ts - üìù API: Fetched 0 file notes and 0 clinical notes
[2025-09-10 16:20:30.257] (INFO) - api/files/[uid]/db_read.ts - ‚úÖ API: File data retrieved successfully
[2025-09-10 16:20:30.259] (DEBUG) - api/files/[uid]/db_read.ts - {
  "uid": "9e8f4487-eb21-40f8-a750-f1d11cf9e285",
  "file_number": "F20258075",
  "account_number": "A410720",
  "patient": {
    "id": "",
    "title": "",
    "name": "",
    "initials": "",
    "surname": "",
    "dob": "",
    "gender": "",
    "cell_phone": "",
    "additional_name": "",
    "additional_cell": "",
    "email": "",
    "address": ""
  },
  "medical_cover": {
    "type": "private",
    "same_as_patient": false,
    "member": {
      "id": "",
      "name": "",
      "initials": "",
      "surname": "",
      "dob": "",
      "cell": "",
      "email": "",
      "address": ""
    },
    "medical_aid": {
      "scheme_id": "",
      "name": "",
      "membership_number": "",
      "dependent_code": ""
    },
    "injury_on_duty": {
      "company_name": "",
      "contact_person": "",
      "contact_number": "",
      "contact_email": ""
    }
  },
  "notes": {
    "file_notes": [],
    "clinical_notes": []
  },
  "medical_schemes": [
    {
      "uid": "8f58a215-d564-49c0-95b2-40e0c9ecf815",
      "scheme_name": "Discovery"
    },
    {
      "uid": "3e5e55cf-4ef3-4a08-be9d-51316a63ad25",
      "scheme_name": "Momentum"
    }
  ]
}
[2025-09-10 16:20:34.914] (INFO) - api/files/[uid]/db_write.ts - Updating file with UID: 9e8f4487-eb21-40f8-a750-f1d11cf9e285
[2025-09-10 16:20:34.914] (DEBUG) - api/files/[uid]/db_write.ts - RECEIVED DATA OBJECT: {
  "uid": "9e8f4487-eb21-40f8-a750-f1d11cf9e285",
  "file_number": "F20258075",
  "account_number": "A410720",
  "patient": {
    "id": "970312898989",
    "title": "",
    "name": "",
    "initials": "",
    "surname": "",
    "dob": "1997/03/12",
    "gender": "",
    "cell_phone": "",
    "additional_name": "",
    "additional_cell": "",
    "email": "",
    "address": ""
  },
  "medical_cover": {
    "type": "private",
    "same_as_patient": false,
    "member": {
      "id": "",
      "name": "",
      "initials": "",
      "surname": "",
      "dob": "",
      "cell": "",
      "email": "",
      "address": ""
    },
    "medical_aid": {
      "scheme_id": "",
      "name": "",
      "membership_number": "",
      "dependent_code": ""
    },
    "injury_on_duty": {
      "company_name": "",
      "contact_person": "",
      "contact_number": "",
      "contact_email": ""
    }
  },
  "notes": {
    "file_notes": [],
    "clinical_notes": []
  },
  "medical_schemes": [
    {
      "uid": "8f58a215-d564-49c0-95b2-40e0c9ecf815",
      "scheme_name": "Discovery"
    },
    {
      "uid": "3e5e55cf-4ef3-4a08-be9d-51316a63ad25",
      "scheme_name": "Momentum"
    }
  ]
}
[2025-09-10 16:20:35.385] (DEBUG) - api/files/[uid]/db_write.ts - Existing file_info found: true
[2025-09-10 16:20:35.386] (DEBUG) - api/files/[uid]/db_write.ts - Has fileinfo_patient relationships: false
[2025-09-10 16:20:35.877] (INFO) - api/files/[uid]/db_write.ts - File_info upserted with UID: 9e8f4487-eb21-40f8-a750-f1d11cf9e285
[2025-09-10 16:20:35.878] (DEBUG) - api/files/[uid]/db_write.ts - Processing patient data
[2025-09-10 16:20:35.879] (DEBUG) - api/files/[uid]/db_write.ts - Processing medical cover data
[2025-09-10 16:20:36.347] (INFO) - api/files/[uid]/db_write.ts - File update completed successfully
